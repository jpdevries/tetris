!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){var d=function(a,b,c,d){this.entity=a,this.color="undefined"==typeof b?"black":b,this.rotation="undefined"==typeof c?0:c,this.blockSize="undefined"==typeof d?.02:d};d.prototype.draw=function(a){var b=this.entity.components.physics.position,c=this.entity.getCurrentMatrix(),d=this.blockSize;a.save(),a.translate(b.x,b.y);for(var e=0;e<c.length;e+=4)!function(b){a.save();for(var c=0;c<b.length;c++)a.fillStyle=b[c]?"black":"red",a.fillRect(0,0,d,d),a.translate(d,0);a.restore()}(c.slice(e,e+4)),a.translate(0,d);a.restore()},c.ShapeGraphicsComponent=d},{}],2:[function(a,b,c){var d=function(a){this.entity=a,this.position={x:0,y:0},this.velocity={x:0,y:0},this.acceleration={x:0,y:1}};d.prototype.update=function(){this.position.y=Math.max(0,this.position.y-.02*this.acceleration.y)},c.PhysicsComponent=d},{}],3:[function(a,b,c){function d(){}var e=a("./shape");d.prototype=new e.Shape([[0,1,1,0,0,1,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,1,1,1,0,0,0,1,0,0,0,0,0],[0,1,0,0,0,1,0,0,1,1,0,0,0,0,0,0],[1,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0]]),d.prototype.constructor=d,c.JShape=d},{"./shape":6}],4:[function(a,b,c){function d(){}var e=a("./shape");d.prototype=new e.Shape([[0,1,0,0,0,1,0,0,0,1,0,0,0,1,0,0],[0,0,0,0,1,1,1,1,0,0,0,0,0,0,0,0],[0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0],[0,0,0,0,0,0,0,0,1,1,1,1,0,0,0,0]]),d.prototype.constructor=d,c.Line=d},{"./shape":6}],5:[function(a,b,c){function d(){}var e=a("./shape");d.prototype=new e.Shape([[1,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0],[0,0,1,0,1,1,1,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,1,0,0,0,1,1,0,0,0,0,0],[0,0,0,0,1,1,1,0,1,0,0,0,0,0,0,0]]),d.prototype.constructor=d,c.LShape=d},{"./shape":6}],6:[function(a,b,c){var d=a("../components/graphics/shape"),e=a("../components/physics/physics"),f=function(a,b){a="undefined"==typeof a?[[0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0],[0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0],[0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0],[0,0,0,0,0,1,1,0,0,1,1,0,0,0,0,0]]:a,b="undefined"==typeof b?.02:b;var c=this;this.matrices=a,this.matrixIndex=0,this.getCurrentMatrix=function(){return c.matrices[c.matrixIndex]};var f=new e.PhysicsComponent(this);f.position.y=1,this.blockSize=b;var g=new d.ShapeGraphicsComponent(this,this.blockSize);this.components={physics:f,graphics:g},this.rotate=function(a){f.position;c.matrixIndex+=a,c.matrixIndex>3&&(c.matrixIndex=0)},this.translate=function(a,c){var d=f.position;d.x+=a*b,d.y+=c*b}};c.Shape=f},{"../components/graphics/shape":1,"../components/physics/physics":2}],7:[function(a,b,c){function d(){}var e=a("./shape");d.prototype=new e.Shape,d.prototype.constructor=d,c.Square=d},{"./shape":6}],8:[function(a,b,c){function d(){}var e=a("./shape");d.prototype=new e.Shape([[1,0,0,0,1,1,0,0,0,1,0,0,0,0,0,0],[0,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,1,1,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,1,1,0,1,1,0,0,0,0,0,0]]),d.prototype.constructor=d,c.SShape=d},{"./shape":6}],9:[function(a,b,c){function d(){}var e=a("./shape");d.prototype=new e.Shape([[0,1,0,0,1,1,1,0,0,0,0,0,0,0,0,0],[0,1,0,0,0,1,1,0,0,1,0,0,0,0,0,0],[0,0,0,0,1,1,1,0,0,1,0,0,0,0,0,0],[0,1,0,0,1,1,0,0,0,1,0,0,0,0,0,0]]),d.prototype.constructor=d,c.Tee=d},{"./shape":6}],10:[function(a,b,c){function d(){}var e=a("./shape");d.prototype=new e.Shape([[0,1,0,0,1,1,0,0,1,0,0,0,0,0,0,0],[1,1,0,0,0,1,1,0,0,0,0,0,0,0,0,0],[0,0,1,0,0,1,1,0,0,1,0,0,0,0,0,0],[0,0,0,0,1,1,0,0,0,1,1,0,0,0,0,0]]),d.prototype.constructor=d,c.ZShape=d},{"./shape":6}],11:[function(a,b,c){var d=a("./tetris");document.addEventListener("DOMContentLoaded",function(){var a=new d.Tetris;a.run()})},{"./tetris":16}],12:[function(a,b,c){var d=function(a,b){this.entities=a,this.canvas=b,this.context=this.canvas.getContext("2d")};d.prototype.run=function(){window.requestAnimationFrame(this.tick.bind(this))},d.prototype.tick=function(){var a=this.canvas,b=this.context;b.clearRect(0,0,a.width,a.height),b.save(),b.translate(a.width/2,a.height),b.scale(a.height,-a.height);for(var c=0;c<this.entities.length;c++){var d=this.entities[c];!1 in d.components||d.components.graphics.draw(b)}b.restore(),window.requestAnimationFrame(this.tick.bind(this))},c.GraphicsSystem=d},{}],13:[function(a,b,c){var d=function(a,b){this.tetris=a,this.entities=a.entities,this.canvas=b};d.prototype.run=function(){this.canvas.addEventListener("click",this.onClick.bind(this)),document.body.addEventListener("keydown",this.onkeydown.bind(this)),document.body.addEventListener("keyup",this.onkeyup.bind(this))},d.prototype.onClick=function(){this.tetris.shapes.currentShape.rotate(1)},d.prototype.onkeydown=function(a){switch(a.keyCode){case 38:this.onClick();break;case 39:this.tetris.shapes.currentShape.translate(1,0);break;case 40:this.tetris.shapes.currentShape.components.physics.acceleration.y=2;break;case 37:this.tetris.shapes.currentShape.translate(-1,0)}},d.prototype.onkeyup=function(a){this.tetris.shapes.currentShape.components.physics.acceleration.y=1},c.InputSystem=d},{}],14:[function(a,b,c){var d=function(a){this.entities=a,this.interval=null};d.prototype.run=function(){this.interval=window.setInterval(this.tick.bind(this),1e3/12)},d.prototype.tick=function(){for(var a=0;a<this.entities.length;a++){var b=this.entities[a];!1 in b.components||b.components.physics.update()}},c.PhysicsSystem=d},{}],15:[function(a,b,c){var d=(a("../entities/shape"),a("../entities/jshape")),e=a("../entities/line"),f=a("../entities/lshape"),g=a("../entities/square"),h=(a("../entities/sshape"),a("../entities/tee")),i=a("../entities/zshape"),j=function(a,b){this.entities=a,this.canvas=b,this.interval=null,this.currentShape=null};j.prototype.run=function(){this.tick()},j.prototype.pause=function(){null!=this.interval&&(window.clearInterval(this.interval),this.interval=null)},j.prototype.tick=function(){var a=[new d.JShape,new e.Line,new f.LShape,new g.Square,new h.Tee,new i.ZShape],b=a[Math.round(Math.random()*(a.length-1))];b.components.physics.position.y=1,this.entities.push(b),this.currentShape=b},c.ShapeSystem=j},{"../entities/jshape":3,"../entities/line":4,"../entities/lshape":5,"../entities/shape":6,"../entities/square":7,"../entities/sshape":8,"../entities/tee":9,"../entities/zshape":10}],16:[function(a,b,c){function d(){e.width=window.innerWidth,e.height=window.innerHeight}Math.randomRange=function(a,b){return a+Math.random()*(b-a)},Math.degreesToRadians=function(a){return a*Math.PI/180},Math.radiansToDegrees=function(a){return 180*a/Math.PI};var e=document.getElementById("canvas"),f=(e.getContext("2d"),document.getElementById("draw-a-shape"),a("./systems/graphics")),g=a("./systems/physics"),h=a("./systems/input"),i=a("./systems/shape_system"),j=(a("./entities/shape"),a("./entities/jshape"),a("./entities/line"),a("./entities/lshape"),a("./entities/square"),a("./entities/sshape"),a("./entities/tee"),a("./entities/zshape"),function(){this.entities=[],this.graphics=new f.GraphicsSystem(this.entities,e),this.physics=new g.PhysicsSystem(this.entities),this.input=new h.InputSystem(this,e),this.shapes=new i.ShapeSystem(this.entities,e)});j.prototype.run=function(){this.graphics.run(),this.physics.run(),this.input.run(),this.shapes.run()},c.Tetris=j,window.onresize=function(){d()},d()},{"./entities/jshape":3,"./entities/line":4,"./entities/lshape":5,"./entities/shape":6,"./entities/square":7,"./entities/sshape":8,"./entities/tee":9,"./entities/zshape":10,"./systems/graphics":12,"./systems/input":13,"./systems/physics":14,"./systems/shape_system":15}]},{},[11]);